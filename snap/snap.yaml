apps:
  server:
    user: pihole
    #pre-start-command: bin/service.server.sh pre-start
    command: bin/service.server.sh start
    #post-start-command: bin/service.server.sh post-start
    daemon: simple
    start-timeout: 600s
    plugs:
    - network
    - network-bind
    restart-condition: always
    before: [nginx]

  php-fpm:
    user: pihole
    command: bin/service.php-fpm.sh start
    daemon: forking
    plugs:
    - network
    - network-bind
    restart-condition: always
    #post-start-command: bin/service.php-fpm.sh post-start
    after: [server]
    before: [nginx]
  nginx:
    user: pihole
    command: bin/service.nginx.sh start
    daemon: simple
    plugs:
    - network
    - network-bind
    restart-condition: always
    start-timeout: 600s
    #pre-start-command: bin/service.nginx.sh pre-start
    stop-command: bin/service.nginx.sh stop
    #reload-command: bin/service.nginx.sh reload

confinement: strict
description: PiHole
grade: stable
name: pihole
summary: PiHole
